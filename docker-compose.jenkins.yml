version: "3.8"

services:
  jenkins:
    image: jenkins/jenkins:lts-jdk11
    container_name: ci-assistant-jenkins
    ports:
      - "8081:8080"        # Jenkins UI available on host:8081
      - "50000:50000"      # agent port (not used here)
    volumes:
      - jenkins_home:/var/jenkins_home
    environment:
      - JAVA_OPTS=-Djenkins.install.runSetupWizard=true
    # allow container to resolve host.docker.internal -> host IP (works on Linux Docker Engine >= 20.10)
    extra_hosts:
      - "host.docker.internal:host-gateway"

volumes:
  jenkins_home:
